---
containers:
  default:
    docker: node:8.9.4

pipelines:
  shopify-utilities:
    steps:
      - label: 'JavaScript Utilities - Lint'
        run:
          - yarn
          - yarn workspace @shopify/javascript-utilities run lint
      - label: 'React Utilities - Lint'
        run:
          - yarn
          - yarn workspace @shopify/javascript-utilities run build
          - yarn workspace @shopify/react-utilities run lint
      - wait
      - label: 'JavaScript Utilities - Publish'
        run:
          - yarn workspace @shopify/javascript-utilities publish
      - label: 'React Utilities - Publish'
        run:
          - yarn workspace @shopify/react-utilities publish